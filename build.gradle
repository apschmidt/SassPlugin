apply plugin: 'groovy'
apply plugin: 'maven'
apply plugin: 'eclipse'

/*
* HELLO! This build script works with Gradle 1.0-milestone-9.
*/

group = 'com.youdevise'

def majorVersion = 1
def minorVersion = 0
def isReleaseVersion = System.getenv('BUILD_NUMBER') != null
def patchVersion = isReleaseVersion ? System.getenv('BUILD_NUMBER') : new Date().format('yyyyMMdd-HHmmss', TimeZone.getTimeZone('UTC'))
def patchSeparator = isReleaseVersion ? '.' : '-'
version = "${majorVersion}.${minorVersion}${patchSeparator}${patchVersion}"

jar {
    manifest {
        attributes(
            'Implementation-Title': project.name,
            'Implementation-Version': project.version,
            'Implementation-Vendor': 'youDevise Ltd',
            'Implementation-Vendor-Id': project.group,
            'Implementation-URL': 'https://github.com/youdevise/SassPlugin'
        )
    }
}

repositories {
    mavenRepo name: 'ydPublic', urls: "${repoUrl}/groups/public"
}

dependencies {
    groovy localGroovy()
    compile gradleApi()
    runtime group: 'org.jruby', name: 'jruby-complete', version: '1.6.7'
    runtime group: 'me.n4u.sass', name: 'sass-gems', version: '3.1.15'
}
